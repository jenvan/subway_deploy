(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ff5281f"],{"5d58":function(t,e,n){t.exports=n("d8d6")},6785:function(t,e,n){},"67bb":function(t,e,n){t.exports=n("f921")},7618:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("5d58"),i=n.n(a),c=n("67bb"),o=n.n(c);function r(t){return r="function"===typeof o.a&&"symbol"===typeof i.a?function(t){return typeof t}:function(t){return t&&"function"===typeof o.a&&t.constructor===o.a&&t!==o.a.prototype?"symbol":typeof t},r(t)}function s(t){return s="function"===typeof o.a&&"symbol"===r(i.a)?function(t){return r(t)}:function(t){return t&&"function"===typeof o.a&&t.constructor===o.a&&t!==o.a.prototype?"symbol":r(t)},s(t)}},"7f7f":function(t,e,n){var a=n("86cc").f,i=Function.prototype,c=/^\s*function ([^ (]*)/,o="name";o in i||n("9e1e")&&a(i,o,{configurable:!0,get:function(){try{return(""+this).match(c)[1]}catch(t){return""}}})},a909:function(t,e,n){"use strict";var a=n("6785"),i=n.n(a);i.a},b271:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("批量应用地域模板")]),t.tplList.length<=0?n("div",[t._v("       \n      尚未创建模板， "),n("router-link",{attrs:{to:"/bat/areaCreate"}},[t._v("点此创建。")])],1):t._e(),t._l(t.tplList,(function(e){return n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("模板："+t._s(e.tpl_name))]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.deleteTpl(e)}}},[n("i",{staticClass:"el-icon-delete"})])],1),n("div",{staticClass:"text item tpl_content",on:{click:function(n){return t.editItem(e)}}},[t._v("\n        "+t._s(t.parseTplData(e.source_data))+" ... >>\n      ")]),n("div",{staticClass:"text item"},[n("el-button",{on:{click:function(n){return t.clickApply(e)}}},[t._v("应用")]),n("el-button",{on:{click:function(n){return t.editItem(e)}}},[t._v("查看")])],1)])],1)})),n("el-drawer",{attrs:{title:"选择应用到的计划",visible:t.drawer,direction:t.direction,size:"50%"},on:{"update:visible":function(e){t.drawer=e}}},[n("div",{staticStyle:{margin:"20px"}},[n("el-checkbox-group",{staticStyle:{margin:"20px","max-height":"400px",width:"80%","overflow-y":"auto"},model:{value:t.checkedList,callback:function(e){t.checkedList=e},expression:"checkedList"}},t._l(t.CampaignSchedule,(function(e){return n("el-row",[n("el-col",[n("el-checkbox",{attrs:{label:e.campaign_id}},[t._v(t._s(e.title))])],1)],1)})),1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",loading:!1},on:{click:t.Apply}},[t._v("立即应用")])],1)])],2)},i=[],c=(n("7f7f"),n("7618")),o=n("1bab"),r=n("4328"),s=n.n(r),l={data:function(){return{tplList:[],CampaignSchedule:[],drawer:!1,direction:"rtl",checkedList:[],schedule:""}},methods:{getAreaTpl:function(){var t=this;Object(o["a"])({url:"/subway/getareaTpl",method:"get"}).then((function(e){console.log(e),t.tplList=e.data}))},getCampaignSchedule:function(){var t=this;Object(o["a"])({url:"/subway/getCampaignSchedule",method:"get"}).then((function(e){console.log(e.data),console.log(Object(c["a"])(e.data)),"object"==Object(c["a"])(e.data)&&(t.CampaignSchedule=e.data)}))},deleteTpl:function(t){var e=this;this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){Object(o["a"])({url:"/subway/delAreaTpl",method:"POST",data:s.a.stringify({id:t.id})}).then((function(t){console.log(t),e.getAreaTpl()})),e.$message({type:"success",message:"删除成功!"})}))},clickApply:function(t){this.schedule=t.tpl_content,this.drawer=!0},Apply:function(){var t=this;console.log(this.CampaignSchedule);for(var e=0;e<this.checkedList.length;e++)Object(o["a"])({url:"/subway/updateCampaignArea",method:"POST",data:s.a.stringify({campaign_id:this.checkedList[e],schedule:this.schedule})}).then((function(e){if(console.log(e),"undefined"!=typeof e.data.data.campaign_area.campaign_id){var n=e.data.data.campaign_area.campaign_id;t.$message({type:"success",message:n+"设置成功!"})}else t.$message({type:"fail",message:"设置失败!"})}))},editItem:function(t){this.$router.push({path:"/bat/areaCreate",query:{id:t.id}})},parseTplData:function(t){var e="";for(var n in t=JSON.parse(t),t){var a=t[n];for(var i in a)for(var c in a[i])"true"!=a[i][c].checked&&1!=a[i][c].checked||(e+=a[i][c].name+" ")}return e}},mounted:function(){this.getAreaTpl(),this.getCampaignSchedule()},watch:{$route:"getAreaTpl"}},u=l,d=(n("a909"),n("2877")),p=Object(d["a"])(u,a,i,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5ff5281f.312c5662.js.map