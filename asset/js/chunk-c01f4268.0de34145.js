(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c01f4268"],{"696a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",[t._v("批量应用时间模板")]),t.tplList.length<=1?i("div",[t._v("       \n      尚未创建模板， "),i("router-link",{attrs:{to:"/bat/timeCreate"}},[t._v("点此创建。")])],1):t._e(),t._l(t.tplList,(function(e){return i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("时间模板："+t._s(e.tpl_name))]),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(i){return t.deleteTpl(e)}}},[i("i",{staticClass:"el-icon-delete"})])],1),i("div",{staticClass:"text item"},[t._v("\n        "+t._s(e.tpl_content)+"\n      ")]),i("div",{staticClass:"text item"},[i("el-button",{on:{click:function(i){return t.clickApply(e)}}},[t._v("应用")])],1)])],1)})),i("el-drawer",{attrs:{title:"选择应用到的计划",visible:t.drawer,direction:t.direction,size:"50%"},on:{"update:visible":function(e){t.drawer=e}}},[i("div",{staticStyle:{margin:"20px"}},[i("el-checkbox-group",{staticStyle:{margin:"20px","max-height":"400px",width:"80%","overflow-y":"auto"},model:{value:t.checkedList,callback:function(e){t.checkedList=e},expression:"checkedList"}},t._l(t.CampaignSchedule,(function(e){return i("el-row",[i("el-col",[i("el-checkbox",{attrs:{label:e.campaign_id}},[t._v(t._s(e.title))])],1)],1)})),1),i("el-button",{attrs:{type:"primary",loading:!1},on:{click:t.Apply}},[t._v("立即应用")])],1)])],2)},n=[],c=i("1bab"),l=i("4328"),s=i.n(l),o={data:function(){return{tplList:[],CampaignSchedule:[],drawer:!1,direction:"rtl",checkedList:[],schedule:""}},watch:{$route:"getTimeTpl"},methods:{getTimeTpl:function(){var t=this;Object(c["a"])({url:"/subway/getTimeTpl",method:"get"}).then((function(e){console.log(e),t.tplList=e.data}))},getCampaignSchedule:function(){var t=this;Object(c["a"])({url:"/subway/getCampaignSchedule",method:"get"}).then((function(e){console.log(e),t.CampaignSchedule=e.data}))},deleteTpl:function(t){var e=this;this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["a"])({url:"/subway/getTimeTpl",method:"POST",data:s.a.stringify({id:t.id,job:"delete"})}).then((function(t){console.log(t),e.getTimeTpl()})),e.$message({type:"success",message:"删除成功!"})}))},clickApply:function(t){this.schedule=t.tpl_content,this.drawer=!0},Apply:function(){var t=this;console.log(this.CampaignSchedule);for(var e=0;e<this.checkedList.length;e++)Object(c["a"])({url:"/subway/updateCampaignSchedule",method:"POST",data:s.a.stringify({campaign_id:this.checkedList[e],schedule:this.schedule})}).then((function(e){if(console.log(e),e.data.data.campaign_schedule.campaign_id){var i=e.data.data.campaign_schedule.campaign_id;t.$message({type:"success",message:i+"设置成功!"})}else t.$message({type:"fail",message:"设置失败!"})}))}},mounted:function(){this.getTimeTpl(),this.getCampaignSchedule()}},r=o,d=(i("798f"),i("2877")),u=Object(d["a"])(r,a,n,!1,null,null,null);e["default"]=u.exports},"798f":function(t,e,i){"use strict";var a=i("c79f"),n=i.n(a);n.a},c79f:function(t,e,i){}}]);
//# sourceMappingURL=chunk-c01f4268.0de34145.js.map