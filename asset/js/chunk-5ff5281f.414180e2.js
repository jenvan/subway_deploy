(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ff5281f"],{"5d58":function(t,e,a){t.exports=a("d8d6")},6785:function(t,e,a){},"67bb":function(t,e,a){t.exports=a("f921")},7618:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("5d58"),i=a.n(n),c=a("67bb"),r=a.n(c);function o(t){return o="function"===typeof r.a&&"symbol"===typeof i.a?function(t){return typeof t}:function(t){return t&&"function"===typeof r.a&&t.constructor===r.a&&t!==r.a.prototype?"symbol":typeof t},o(t)}function s(t){return s="function"===typeof r.a&&"symbol"===o(i.a)?function(t){return o(t)}:function(t){return t&&"function"===typeof r.a&&t.constructor===r.a&&t!==r.a.prototype?"symbol":o(t)},s(t)}},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,c=/^\s*function ([^ (]*)/,r="name";r in i||a("9e1e")&&n(i,r,{configurable:!0,get:function(){try{return(""+this).match(c)[1]}catch(t){return""}}})},a909:function(t,e,a){"use strict";var n=a("6785"),i=a.n(n);i.a},b271:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("批量应用地域模板")]),t.tplList.length<=0?a("div",[t._v("\n        尚未创建模板， "),a("router-link",{attrs:{to:"/bat/areaCreate"}},[t._v("点此创建。")])],1):t._e(),t._l(t.tplList,(function(e){return a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("模板："+t._s(e.tpl_name))]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.deleteTpl(e)}}},[a("i",{staticClass:"el-icon-delete"})])],1),a("div",{staticClass:"text item tpl_content",on:{click:function(a){return t.editItem(e)}}},[t._v("\n                "+t._s(t.parseTplData(e.source_data))+" ... >>\n            ")]),a("div",{staticClass:"text item"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.clickApply(e)}}},[t._v("应用到计划")]),a("el-button",{on:{click:function(a){return t.editItem(e)}}},[t._v("编辑")])],1)])],1)})),a("el-drawer",{attrs:{title:"选择应用到的计划",visible:t.drawer,direction:t.direction,size:"50%"},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticStyle:{margin:"20px"}},[a("el-checkbox-group",{staticStyle:{margin:"20px","max-height":"400px",width:"80%","overflow-y":"auto"},model:{value:t.checkedList,callback:function(e){t.checkedList=e},expression:"checkedList"}},t._l(t.CampaignSchedule,(function(e){return a("el-row",[a("el-col",[a("el-checkbox",{attrs:{label:e.campaign_id}},[t._v(t._s(e.title))])],1)],1)})),1),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",loading:!1},on:{click:t.Apply}},[t._v("立即应用")])],1)])],2)},i=[],c=(a("7f7f"),a("7618")),r=a("1bab"),o=a("4328"),s=a.n(o),l={data:function(){return{tplList:[],CampaignSchedule:[],drawer:!1,direction:"rtl",checkedList:[],schedule:""}},methods:{getAreaTpl:function(){var t=this;Object(r["a"])({url:"/subway/getareaTpl",method:"get"}).then((function(e){console.log(e),t.tplList=e.data}))},getCampaignSchedule:function(){var t=this;Object(r["a"])({url:"/subway/getCampaignSchedule",method:"get"}).then((function(e){console.log(e.data),console.log(Object(c["a"])(e.data)),"object"==Object(c["a"])(e.data)&&(t.CampaignSchedule=e.data)}))},deleteTpl:function(t){var e=this;this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){Object(r["a"])({url:"/subway/delAreaTpl",method:"POST",data:s.a.stringify({id:t.id})}).then((function(t){console.log(t),e.getAreaTpl()})),e.$message({type:"success",message:"删除成功!"})}))},clickApply:function(t){this.schedule=t.tpl_content,this.drawer=!0},Apply:function(){var t=this;console.log(this.CampaignSchedule);for(var e=0;e<this.checkedList.length;e++)Object(r["a"])({url:"/subway/updateCampaignArea",method:"POST",data:s.a.stringify({campaign_id:this.checkedList[e],schedule:this.schedule})}).then((function(e){if(console.log(e),"undefined"!=typeof e.data.data.campaign_area.campaign_id){var a=e.data.data.campaign_area.campaign_id;t.$message({type:"success",message:a+"设置成功!"})}else t.$message({type:"fail",message:"设置失败!"})}))},editItem:function(t){this.$router.push({path:"/bat/areaCreate",query:{id:t.id}})},parseTplData:function(t){var e="";try{if(t=JSON.parse(t),"object"==Object(c["a"])(t)){for(var a in t){var n=t[a];for(var i in n)for(var r in n[i])"true"!=n[i][r].checked&&1!=n[i][r].checked||(e+=n[i][r].name+" ")}return e}}catch(o){return t}}},mounted:function(){this.getAreaTpl(),this.getCampaignSchedule()},watch:{$route:function(t,e){"/bat/areaCreate"==e.path&&(this.getAreaTpl(),this.getCampaignSchedule())}}},u=l,d=(a("a909"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5ff5281f.414180e2.js.map