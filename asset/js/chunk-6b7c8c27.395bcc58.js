(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b7c8c27"],{1141:function(t,e,o){},"1ff0":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main-content"},[o("el-container",[o("el-aside",{staticStyle:{overflow:"hidden"},attrs:{width:t.asideWidth}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开","inactive-text":"关"},model:{value:t.isCollapse,callback:function(e){t.isCollapse=e},expression:"isCollapse"}}),o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:!t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},t._l(t.CampaignsList,(function(e,a){return o("el-submenu",{key:e.campaign_id,attrs:{index:e.campaign_id}},[o("template",{slot:"title"},[t._v("\n                  "+t._s(e.title)+"\n                  "),o("el-badge",{staticClass:"item",attrs:{value:"object"==typeof e.adgroup?""+e.adgroup.length:""}},[o("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])],1),"undefined"!=typeof e.adgroup?o("el-menu-item-group",t._l(e.adgroup,(function(a){return o("el-menu-item",{attrs:{index:e.campaign_id+"-"+a.adgroup_id},on:{click:function(e){return t.filterData({type:"and",items:[{sItem:"adgroup_id",sOperator:"==",sValue:a.adgroup_id}]})}}},[t._v(t._s(a.title))])})),1):t._e()],2)})),1)],1),o("el-main",[o("div",{staticClass:"top-option"},[o("div",{staticStyle:{"text-align":"right"}},[o("div",{staticStyle:{display:"inline"}},[o("el-button",{attrs:{icon:"el-icon-set-up"},on:{click:function(e){t.dialogChooseFormVisible=!0}}},[t._v("筛选")])],1),o("div",{staticStyle:{"margin-left":"20px",display:"inline"}},[t._v("\n                        选择数据周期：\n                        "),o("el-select",{on:{change:t.resetDuringTime},model:{value:t.duringTime,callback:function(e){t.duringTime=e},expression:"duringTime"}},[o("el-option",{attrs:{label:"昨天",value:"last1day"}}),o("el-option",{attrs:{label:"最近7天",value:"last7days"}}),o("el-option",{attrs:{label:"最近14天",value:"last14days"}}),o("el-option",{attrs:{label:"最近30天",value:"last30days"}})],1)],1)]),o("el-dialog",{attrs:{title:"筛选选项",visible:t.dialogChooseFormVisible},on:{"update:visible":function(e){t.dialogChooseFormVisible=e}}},[o("el-form",{attrs:{model:t.chooseform}},[o("el-form-item",[o("el-select",{model:{value:t.choosetype,callback:function(e){t.choosetype=e},expression:"choosetype"}},[o("el-option",{attrs:{label:"且",value:"and"}}),o("el-option",{attrs:{label:"或",value:"or"}})],1),o("i",{staticClass:"el-icon-circle-plus chooseform-icon",on:{click:t.addChooseItem}}),o("span",{staticStyle:{"margin-left":"20px"}},[t._v("请点图标添加筛选条件")])],1),t._l(t.chooseformArr,(function(e,a){return o("el-form-item",{attrs:{label:"","label-width":t.formLabelWidth}},[o("el-select",{model:{value:e.sItem,callback:function(o){t.$set(e,"sItem",o)},expression:"chooseform.sItem"}},t._l(t.columns,(function(e){return e.title?o("el-option",{attrs:{label:e.title,value:e.field}}):t._e()})),1),o("el-select",{staticStyle:{"margin-left":"10px"},model:{value:e.sOperator,callback:function(o){t.$set(e,"sOperator",o)},expression:"chooseform.sOperator"}},t._l(t.methods,(function(t){return o("el-option",{attrs:{label:t.title,value:t.method}})})),1),o("el-input",{staticStyle:{"margin-left":"10px"},model:{value:e.sValue,callback:function(o){t.$set(e,"sValue",o)},expression:"chooseform.sValue"}}),o("i",{staticClass:"el-icon-circle-close chooseform-icon",staticStyle:{"font-size":"20px",cursor:"pointer"},on:{click:function(e){return t.chooseformArr.splice(a,1)}}})],1)}))],2),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogChooseFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submitChooseForm}},[t._v("确 定")])],1)],1)],1),o("el-dialog",{attrs:{title:"修改人群溢价",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"固定溢价","label-width":t.formLabelWidth}},[o("el-radio",{attrs:{label:"1"},model:{value:t.form.radio,callback:function(e){t.$set(t.form,"radio",e)},expression:"form.radio"}},[o("el-input",{attrs:{disabled:"1"!=t.form.radio},model:{value:t.form.value1,callback:function(e){t.$set(t.form,"value1",e)},expression:"form.value1"}})],1)],1),o("el-form-item",{attrs:{label:"比例溢价","label-width":t.formLabelWidth}},[o("el-radio",{attrs:{label:"2"},model:{value:t.form.radio,callback:function(e){t.$set(t.form,"radio",e)},expression:"form.radio"}},[o("el-select",{attrs:{disabled:"2"!=t.form.radio},model:{value:t.form.method2,callback:function(e){t.$set(t.form,"method2",e)},expression:"form.method2"}},[o("el-option",{attrs:{label:"增加",value:"plus"}}),o("el-option",{attrs:{label:"减少",value:"decrease"}})],1),o("el-input",{attrs:{disabled:"2"!=t.form.radio},model:{value:t.form.rate2,callback:function(e){t.$set(t.form,"rate2",e)},expression:"form.rate2"}}),t._v("%  溢价不高于："),o("el-input",{attrs:{disabled:"2"!=t.form.radio},model:{value:t.form.limit2,callback:function(e){t.$set(t.form,"limit2",e)},expression:"form.limit2"}})],1)],1),o("el-form-item",{attrs:{label:"增减溢价","label-width":t.formLabelWidth}},[o("el-radio",{attrs:{label:"3"},model:{value:t.form.radio,callback:function(e){t.$set(t.form,"radio",e)},expression:"form.radio"}},[o("el-select",{attrs:{disabled:"3"!=t.form.radio},model:{value:t.form.method3,callback:function(e){t.$set(t.form,"method3",e)},expression:"form.method3"}},[o("el-option",{attrs:{label:"增加",value:"plus"}}),o("el-option",{attrs:{label:"减少",value:"decrease"}})],1),o("el-input",{attrs:{disabled:"3"!=t.form.radio},model:{value:t.form.rate3,callback:function(e){t.$set(t.form,"rate3",e)},expression:"form.rate3"}}),t._v("   溢价不高于："),o("el-input",{attrs:{disabled:"3"!=t.form.radio},model:{value:t.form.limit3,callback:function(e){t.$set(t.form,"limit3",e)},expression:"form.limit3"}})],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",id:"change-discount-submit"}},[t._v("确 定")])],1)],1),o("div",{staticClass:"toolbar form-inline"},[o("el-button",{attrs:{id:"btn-online",icon:"el-icon-video-play","data-action":"online"}},[t._v("开始推广")]),o("el-button",{attrs:{id:"btn-offline",icon:"el-icon-video-pause","data-action":"offline"}},[t._v("停止推广")]),o("el-button",{attrs:{id:"btn-delete",icon:"el-icon-delete","data-action":"delete"}},[t._v("删除")]),o("el-button",{attrs:{id:"btn-discount",icon:"el-icon-edit","data-action":"discount"}},[t._v("修改溢价")])],1),o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-div",attrs:{"element-loading-text":t.loadingText}},[o("table",{staticStyle:{width:"2500px"},attrs:{id:"table"}}),o("div",[t._v("汇总数据：")]),o("div",[t._v("总展现："+t._s(t.totalImpression)+" 总点击："+t._s(t.totalClick)+" 总花费："+t._s((t.totalCost/100).toFixed(2))+"元 ,点击单价"+t._s((t.totalCost/100/t.totalClick).toFixed(2))+"元，成交金额"+t._s((t.totalTransactiontotal/100).toFixed(2))+"元，成交数量"+t._s(t.totalTransactionshippingtotal)+"，购物车数"+t._s(t.totalCarttotal)+"，总收藏数"+t._s(t.totalFavtotal)+"，")])])],1)],1)],1)},i=[],l=o("fa26"),s=l["a"],r=(o("bbfe"),o("2877")),n=Object(r["a"])(s,a,i,!1,null,null,null);e["default"]=n.exports},"2f21":function(t,e,o){"use strict";var a=o("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,o){"use strict";var a=o("5ca1"),i=o("d8e8"),l=o("4bf8"),s=o("79e5"),r=[].sort,n=[1,2,3];a(a.P+a.F*(s((function(){n.sort(void 0)}))||!s((function(){n.sort(null)}))||!o("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(l(this)):r.call(l(this),i(t))}})},ac6a:function(t,e,o){for(var a=o("cadf"),i=o("0d58"),l=o("2aba"),s=o("7726"),r=o("32e9"),n=o("84f2"),_=o("2b4c"),c=_("iterator"),d=_("toStringTag"),u=n.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(m),p=0;p<f.length;p++){var b,h=f[p],g=m[h],v=s[h],w=v&&v.prototype;if(w&&(w[c]||r(w,c,u),w[d]||r(w,d,h),n[h]=u,g))for(b in a)w[b]||l(w,b,a[b],!0)}},bbfe:function(t,e,o){"use strict";var a=o("1141"),i=o.n(a);i.a},fa26:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__),_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bd86"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_2__),_network_request_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1bab"),qs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4328"),qs__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_4__);__webpack_exports__["a"]={name:"auto",data:function(){return{columns:[{checkbox:!0},{title:"人群ID",field:"crowd_crowd_id",sortable:!0},{field:"campaign_title",title:"计划",sortable:!0,width:"200px"},{field:"crowd_name",title:"人群",sortable:!0,width:"240px"},{field:"discount",title:"溢价",sortable:!0,width:"80px"},{field:"online_status",title:"状态",sortable:!0,width:"80px"},{field:"crowd_type",title:"人群类型",sortable:!0,width:"100px"},{field:"num_iid_title",title:"宝贝",sortable:!0,width:"250px",class:"table-item-title"},{field:"num_iid",title:"宝贝num_iid",sortable:!0},{field:"click",title:"点击",sortable:!0},{field:"cost",title:"花费",sortable:!0},{field:"cpc",title:"单次点击费用",sortable:!0},{field:"cpm",title:"单次展示费用",sortable:!0},{field:"roi",title:"ROI",sortable:!0},{field:"ctr",title:"点击率",sortable:!0},{field:"favototal",title:"收藏总数",sortable:!0},{field:"carttotal",title:"加购物车",sortable:!0},{field:"impression",title:"展示",sortable:!0},{field:"transactionshippingtotal",title:"成交数量",sortable:!0},{field:"transactiontotal",title:"成交金额",sortable:!0}],methods:[{method:"==",title:"等于"},{method:"<>",title:"不等于"},{method:">",title:"大于"},{method:">=",title:"大于等于"},{method:"<",title:"小于"},{method:"<=",title:"小于等于"},{method:"between",title:"介于"},{method:"in",title:"包含"},{method:"notIn",title:"不包含"}],data:[],TableData:[],loadDataTimes:0,options:{search:!0,showColumns:!0,sortable:!0,sorting:!0,singleSelect:!0},dialogFormVisible:!1,form:{radio:"1",value1:"",method2:"plus",rate2:"",limit2:"300",method3:"plus",rate3:"",limit3:"300"},formLabelWidth:"200",duringTime:"last1day",loading:!1,loadingText:"加载中",isCollapse:!0,CampaignsList:[],totalClick:0,totalCost:0,totalImpression:0,totalCarttotal:0,totalTransactionshippingtotal:0,totalTransactiontotal:0,totalFavtotal:0,asideWidth:"300px",dialogChooseFormVisible:!1,chooseformArr:[{sItem:"impression",sOperator:">=",sValue:"200"}],chooseform:{},choosetype:"and"}},components:{},watch:{isCollapse:function(t){this.asideWidth=t?"300px":"100px"}},methods:{handleOpen:function(t,e){console.log(t,e),this.filterData({type:"and",items:[{sItem:"campaign_id",sOperator:"==",sValue:t}]})},handleClose:function(t,e){console.log(t,e)},addChooseItem:function(){this.chooseformArr.push([])},submitChooseForm:function(){console.log({type:this.choosetype,items:this.chooseformArr}),this.filterData({type:this.choosetype,items:this.chooseformArr})},resetDuringTime:function(){var t=this,e=this;this.loading=!0,Object(_network_request_js__WEBPACK_IMPORTED_MODULE_3__["a"])({url:"/crowd/getCrowdByDuringTime",params:{duringTime:this.duringTime}}).then((function(o){var a;console.log("getCrowdByDuringTime:",o),t.data=o.data,t.loadDataTimes<1?(t.loadDataTimes++,0==t.data.length&&t.$message("需要获取更新数据，请耐心等待……"),t.SyncCamppaignAdgroupCrowd()):t.loading=!1,t.resetTotalData(o.data),$("#table").bootstrapTable("destroy").bootstrapTable((a={method:"GET",uniqueId:"id",striped:!1,cache:!1,sortable:!0,sortOrder:"asc",sidePagination:"client",undefinedText:"--",showColumns:!0,toolbar:"#item_info_toolbar",search:!0,strictSearch:!0,clickToSelect:!0,pagination:!0,pageNumber:1,pageSize:20,pageList:[5,10,20,50,100],paginationPreText:"上一页",paginationNextText:"下一页",paginationLoop:!1,queryParams:function(t){var e={rows:t.limit,page:t.offset/t.limit+1,sort:t.sort,sortOrder:t.order};return e},columns:e.columns,data:o.data},Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"toolbar",".toolbar"),Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"fixedColumns",!0),Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"fixedNumber",1),Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"onLoadSuccess",(function(){alert("表格加载成功！")})),Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"onLoadError",(function(){showTips("数据加载失败！")})),Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"onDblClickRow",(function(t,e){t.ID})),Object(_home_runner_work_subway_subway_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(a,"rowStyle",(function(t,e){var o="";return 1==e&&(o="warning",console.log(t)),{classes:o}})),a))}))},SyncCamppaignAdgroupCrowd:function(){var t=this;Object(_network_request_js__WEBPACK_IMPORTED_MODULE_3__["a"])({url:"/crowdCommand/SyncCamppaignAdgroupCrowd"}).then((function(e){console.log("SyncCamppaignAdgroupCrowd:",e),console.log(t.data.length),0==t.data.length?(console.log("reget data"),t.resetDuringTime()):t.loading=!1}))},filterData:function filterData(filter){var newData=[],str=[],joinType;filter.items.forEach((function(t){str.push("(item."+t.sItem+" "+t.sOperator+" "+t.sValue+")")})),"and"==filter.type?(console.log(str.join("&&")),joinType="&&"):(console.log(str.join("||")),joinType="||"),this.data.forEach((function(item){eval(str.join(joinType))&&newData.push(item)})),this.TableData=newData,this.resetTotalData(newData),$("#table").bootstrapTable("load",newData)},resetTotalData:function(t){for(var e=0,o=0,a=0,i=0,l=0,s=0,r=0,n=0;n<t.length;n++)"undefined"!=typeof t[n]["click"]&&(e+=parseInt(t[n]["click"])),"undefined"!=typeof t[n]["cost"]&&(o+=parseInt(t[n]["cost"])),"undefined"!=typeof t[n]["impression"]&&(a+=parseInt(t[n]["impression"])),"undefined"!=typeof t[n]["carttotal"]&&(i+=parseInt(t[n]["carttotal"])),"undefined"!=typeof t[n]["transactionshippingtotal"]&&(l+=parseInt(t[n]["transactionshippingtotal"])),"undefined"!=typeof t[n]["transactiontotal"]&&(s+=parseInt(t[n]["transactiontotal"]),console.log(s)),"undefined"!=typeof t[n]["favtotal"]&&(r+=parseInt(t[n]["favtotal"]));this.totalClick=e,this.totalCost=o,this.totalImpression=a,this.totalCarttotal=i,this.totalTransactionshippingtotal=l,this.totalTransactiontotal=s,this.totalFavtotal=r}},computed:{},mounted:function(){var t=this,e=this;this.resetDuringTime(),Object(_network_request_js__WEBPACK_IMPORTED_MODULE_3__["a"])({url:"/crowd/CampaignsGet"}).then((function(e){console.log("CampaignsGet:",e),t.CampaignsList=e.data}));var o=$("#table"),a=$("#button");function i(t,a){var i=o.bootstrapTable("getSelections");0!=i.length?e.$confirm("确定要执行批量操作？(影响"+i.length+"项)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(_network_request_js__WEBPACK_IMPORTED_MODULE_3__["a"])({url:"/crowd/updateCrowd",data:qs__WEBPACK_IMPORTED_MODULE_4___default.a.stringify({selected:i,action:t,value:a}),method:"post"}).then((function(t){console.log("status:",t)}))})):e.$message.error("请先勾选要操作的列表项")}a.click((function(){alert("getSelections: "+JSON.stringify(o.bootstrapTable("getSelections")))})),$("#btn-online").click((function(){i("state","online")})),$("#btn-offline").click((function(){i("state","offline")})),$("#btn-delete").click((function(){i("delete","")})),$("#btn-discount").click((function(){e.dialogFormVisible=!0})),$("#change-discount-submit").click((function(){i("discount",e.form)}))}}}).call(this,__webpack_require__("1157"))}}]);
//# sourceMappingURL=chunk-6b7c8c27.395bcc58.js.map