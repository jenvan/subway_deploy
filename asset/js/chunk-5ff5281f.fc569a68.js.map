{"version":3,"sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/symbol.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/bat/areaApply.vue?69e7","webpack:///./src/views/bat/areaApply.vue?157e","webpack:///src/views/bat/areaApply.vue","webpack:///./src/views/bat/areaApply.vue?a1d8","webpack:///./src/views/bat/areaApply.vue"],"names":["module","exports","_typeof2","obj","constructor","prototype","_typeof","dP","f","FProto","Function","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","_v","tplList","length","attrs","_e","_l","item","staticStyle","staticClass","slot","_s","tpl_name","on","$event","deleteTpl","editItem","parseTplData","source_data","clickApply","drawer","direction","model","value","callback","$$v","checkedList","expression","campaign_id","title","Apply","staticRenderFns","component"],"mappings":"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","file":"asset/js/chunk-5ff5281f.fc569a68.js","sourcesContent":["module.exports = require(\"core-js/library/fn/symbol/iterator\");","module.exports = require(\"core-js/library/fn/symbol\");","import _Symbol$iterator from \"../../core-js/symbol/iterator\";\nimport _Symbol from \"../../core-js/symbol\";\n\nfunction _typeof2(obj) { if (typeof _Symbol === \"function\" && typeof _Symbol$iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof _Symbol === \"function\" && _typeof2(_Symbol$iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./areaApply.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./areaApply.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"批量应用地域模板\")]),(_vm.tplList.length<=0)?_c('div',[_vm._v(\"\\n        尚未创建模板， \"),_c('router-link',{attrs:{\"to\":\"/bat/areaCreate\"}},[_vm._v(\"点此创建。\")])],1):_vm._e(),_vm._l((_vm.tplList),function(item){return _c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('el-card',{staticClass:\"box-card\",attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"模板：\"+_vm._s(item.tpl_name))]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteTpl(item)}}},[_c('i',{staticClass:\"el-icon-delete\"})])],1),_c('div',{staticClass:\"text item tpl_content\",on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\"\\n                \"+_vm._s(_vm.parseTplData(item.source_data))+\" ... >>\\n            \")]),_c('div',{staticClass:\"text item\"},[_c('el-button',{on:{\"click\":function($event){return _vm.clickApply(item)}}},[_vm._v(\"应用\")]),_c('el-button',{on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\"查看\")])],1)])],1)}),_c('el-drawer',{attrs:{\"title\":\"选择应用到的计划\",\"visible\":_vm.drawer,\"direction\":_vm.direction,\"size\":\"50%\"},on:{\"update:visible\":function($event){_vm.drawer=$event}}},[_c('div',{staticStyle:{\"margin\":\"20px\"}},[_c('el-checkbox-group',{staticStyle:{\"margin\":\"20px\",\"max-height\":\"400px\",\"width\":\"80%\",\"overflow-y\":\"auto\"},model:{value:(_vm.checkedList),callback:function ($$v) {_vm.checkedList=$$v},expression:\"checkedList\"}},_vm._l((_vm.CampaignSchedule),function(item){return _c('el-row',[_c('el-col',[_c('el-checkbox',{attrs:{\"label\":item.campaign_id}},[_vm._v(_vm._s(item.title))])],1)],1)}),1),_c('el-button',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"primary\",\"loading\":false},on:{\"click\":_vm.Apply}},[_vm._v(\"立即应用\")])],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <h3>批量应用地域模板</h3>\n        <div v-if=\"tplList.length<=0\">\n            尚未创建模板， <router-link to=\"/bat/areaCreate\">点此创建。</router-link>\n        </div>\n\n        <div v-for=\"item in tplList\" style=\"margin-bottom: 10px;\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>模板：{{item.tpl_name}}</span>\n                    <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"deleteTpl(item)\"><i class=\"el-icon-delete\"></i>\n                    </el-button>\n                </div>\n                <div class=\"text item tpl_content\" @click=\"editItem(item)\">\n                    {{parseTplData(item.source_data)}} ... &gt;&gt;\n                </div>\n\n                <div class=\"text item\">\n                    <el-button @click=\"clickApply(item)\">应用</el-button>\n                    <el-button @click=\"editItem(item)\">查看</el-button>\n\n                </div>\n            </el-card>\n        </div>\n\n\n        <el-drawer title=\"选择应用到的计划\" :visible.sync=\"drawer\" :direction=\"direction\" size=\"50%\">\n            <div style=\"margin:20px;\">\n                <el-checkbox-group v-model=\"checkedList\" style=\"margin: 20px; max-height:400px; width:80%;overflow-y: auto\">\n                    <el-row v-for=\"item in CampaignSchedule\">\n                        <el-col>\n                            <el-checkbox :label=\"item.campaign_id\">{{item.title}}</el-checkbox>\n                        </el-col>\n                    </el-row>\n                </el-checkbox-group>\n\n                <el-button @click=\"Apply\" type=\"primary\" :loading=\"false\" style=\"margin-top: 10px;\">立即应用</el-button>\n\n\n            </div>\n        </el-drawer>\n\n    </div>\n</template>\n\n<script>\n    import {\n        request\n    } from \"@/network/request.js\";\n    import Qs from 'qs';\n\n\n    export default {\n        data() {\n            return {\n\n                tplList: [],\n                CampaignSchedule: [],\n                drawer: false,\n                direction: 'rtl',\n                checkedList: [],\n                schedule: '',\n            }\n        },\n\n        methods: {\n            getAreaTpl() {\n\n                request({\n                    url: \"/subway/getareaTpl\",\n                    method: 'get',\n                }).then(res => {\n                    console.log(res)\n                    this.tplList = res.data;\n                })\n            },\n            getCampaignSchedule() {\n\n                request({\n                    url: \"/subway/getCampaignSchedule\",\n                    method: 'get',\n                }).then(res => {\n                    console.log(res.data)\n\n                    console.log(typeof res.data)\n                    if (typeof res.data == \"object\") {\n                        this.CampaignSchedule = res.data;\n                    }\n\n                })\n\n\n            },\n            deleteTpl(item) {\n\n                this.$confirm('是否继续删除?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消'\n                }).then(() => {\n\n                    request({\n                        url: \"/subway/delAreaTpl\",\n                        method: 'POST',\n                        data: Qs.stringify({\n                            id: item.id\n                        }),\n                    }).then(res => {\n                        console.log(res)\n\n                        //去掉此条记录\n                        this.getAreaTpl();\n\n                    })\n                    this.$message({\n                        type: 'success',\n                        message: '删除成功!'\n                    });\n                })\n\n            },\n\n            //打开计划选择框\n            clickApply(item) {\n                this.schedule = item.tpl_content;\n                this.drawer = true;\n            },\n            //应用到计划\n            Apply() {\n\n                console.log(this.CampaignSchedule);\n\n                for (var i = 0; i < this.checkedList.length; i++) {\n\n                    request({\n                        url: \"/subway/updateCampaignArea\",\n                        method: 'POST',\n                        data: Qs.stringify({\n                            campaign_id: this.checkedList[i],\n                            schedule: this.schedule,\n                        }),\n                    }).then(res => {\n                        console.log(res)\n                        if (typeof res.data.data.campaign_area.campaign_id != 'undefined') {\n                            let cid = res.data.data.campaign_area.campaign_id;\n                            this.$message({\n                                type: 'success',\n                                message: cid + '设置成功!'\n                            });\n                        } else {\n\n                            this.$message({\n                                type: 'fail',\n                                message: '设置失败!'\n                            });\n                        }\n\n\n                    })\n                }\n            },\n            editItem(item) {\n                this.$router.push({\n                    path: '/bat/areaCreate',\n                    query: {\n                        id: item.id\n                    }\n                })\n            },\n            parseTplData(data) {\n                var area_name = '';\n\n                try {\n                    data = JSON.parse(data)\n                    \n                    if (typeof data == \"object\") {\n                        \n                        \n                        \n                        for (var x in data) {\n                            var area = data[x];\n                        \n                        \n                        \n                            for (var y in area) {\n                                //console.log(area[y]);\n                        \n                                for (var z in area[y]) {\n                                    if (area[y][z].checked == 'true' || area[y][z].checked == true) {\n                                        area_name += area[y][z].name + \" \";\n                                    }\n                                }\n                        \n                        \n                        \n                            }\n                        }\n                        return area_name;\n\n                    }\n                } catch (e) {\n                    return data;\n                    \n                }\n\n            }\n\n        },\n        mounted() {\n            this.getAreaTpl();\n\n            this.getCampaignSchedule();\n\n        },\n        watch: {\n            // 如果路由有变化，会再次执行该方法\n            '$route': 'getAreaTpl'\n        },\n    }\n</script>\n\n<style>\n    .el-row {\n        margin-bottom: 20px;\n\n        &:last-child {\n            margin-bottom: 0;\n        }\n    }\n\n    .tpl_content {\n\n        padding: 10px 0px;\n        cursor: pointer;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./areaApply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./areaApply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./areaApply.vue?vue&type=template&id=934f482c&\"\nimport script from \"./areaApply.vue?vue&type=script&lang=js&\"\nexport * from \"./areaApply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./areaApply.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}